# Community structure of southern California’s subtidal rocky reefs across depth and implications for artificial reef design

Currently in prep for Marine Ecology Progress Series.

*Zoë J. Kitchel<sup>1</sup>, Jeremy T. Claisse<sup>1,2</sup>, Daniel J. Pondella II<sup>1</sup>, Chelsea M. Williams<sup>1</sup>, Jonathan P. Williams<sup>1</sup>, & Donna Schroeder<sup>3</sup>*

<sup>1</sup>Vantuna Research Group, Occidental College, Los Angeles, CA, 90041, USA
<sup>2</sup>Department of Biological Sciences, California State Polytechnic University, Pomona, CA, 91768, USA
<sup>3</sup>Bureau of Ocean Energy Management Pacific OCS Region, 760 Paseo Camarillo, Suite 102 Camarillo, CA 93010

Please contact [Z.J. Kitchel](https://www.zoekitchel.com/) with questions about this project. The results are partially reproducible from the scripts and data files that can be shared are either in this GitHub repository or (if they are too large) will be hosted on [OSF](https://osf.io/) (as described below). 

## Where do data come from?

The Vantuna Research Group at Occidental College conducts annual biodiversity surveys of natural and artificial reefs in southern California. These surveys (with some TLC, and limited to 2016-2023) inform these analyses. [Learn more about this research group here.](https://www.oxy.edu/academics/vantuna-research-group)


## What's in this repository?

The repository is organized as follows:

* `data` contains raw datasets obtained from other sources (described above).
* `scripts` contains code to clean data and run analyses
* `output` contains outputs of scripts that filter, clean, summarize, or analyze data. Also contains csv, rds, and xlsx files generated by scripts for main and supplementary tables.
* `figures` contains image files generated by scripts for the main and supplemental figures.
* `archive` includes a mismash of scripts,output, figures, and tables that were a part of project development, but do not directly connect to currently used scripts, outputs, figures, or tables. Viewer beware, these are very possibly **wrong**, broken and non-functional but mean something significant to the authors, and are therefore included because ZJK is a hoarder. *NB: some of the folders above have their own internal archives*

## What's not in the repository? 

Raw data? TBD.

## In what order should things be run?

To reproduce the analysis, run these scripts in order:

**Data prep:**

1. `scripts` > `load_data.R` (Will only work if you're synced up with VRG DropBox on your PC.)

**Analyses and visualizations**

1. `scripts` > `depth_zone summaries.R`:
1. `scripts` > `abundance_diversity_depth.R`:
1. `scripts` > `community_visualizations.R`:
1. `scripts` > `site_maps.R`: 

**Source scripts for figures and tables**

Main text:

- Figure 1: `scripts` > `site_maps.R` outputs `site_map_basic_with_insets.jpg`
- Figure 2: Made manually with fish icons from [Dr. Larry G. Allen](https://www.researchgate.net/profile/Larry-Allen-3). Thanks, Larry!
- Figure 3: `scripts` > `abundance_diversity_depth.R` outputs `depthzone_density_abundance_richness.jpg`
- Figure 4: `scripts` > `depth_zone_summaries.R` outputs `Fig4_fish_top5_sitetype_stacked.jpg`
- Figure 5: `scripts` > `depth_zone_summaries.R` outputs `Fig5_kelp_top5_sitetype_stacked.jpg`
- Figure 6: `scripts` > `depth_zone_summaries.R` outputs `Fig6_macroinvert_top5_sitetype_stacked.jpg`
- Figure 7: `scripts` > `community_visualizations.R` outputs `PCoA_fish_allsite_AR_natural_merge.jpg`


Supplemental Figures: **in progress**
- Figure S1: `scripts` > `depth_zone_summaries.R` outputs `FigS1_top5_sitetype_OUTERDEEP_only_stacked.jpg`
- Figure S2: `scripts` > `depth_zone_summaries.R` outputs `FigS2_all_spp_top5_stacked_AR_complexes.jpg`
- Figure S3: `scripts` > `abundance_diversity_depth.R` outputs `FigS3_mainlandvsisland_density_abundance_richness.jpg`
- Figure S4: `scripts` > `abundance_diversity_depth.R` outputs `FigS4_depthzone_abun_rich_div_merge_dunn.l.jpg`
- Figure S5: `scripts` > `abundance_diversity_depth.R` outputs `FigS5_depthzone_density_abundance_richness_MPA.jpg`
- Figure S6: `scripts` > `community_visualizations.R` outputs `FigS6_PCoA_allspp_allsite_MPA_REG_merge.jpg`
- Figure S7: `scripts` > `community_visualizations.R` outputs `FigS7_PCoA_allsite_AR_natural_merge_taxagroups.jpg`
- Figure SX: `scripts` > `abundance_diversity_depth.R` outputs `FigSX_depthzone_relief_substrate.jpg` plus manual edit

Supplemental Tables: **in progress**


## Notes
* Upon publication, package versions used in this analysis will be captured by `renv` and listed [in the lockfile](....renv.lock). Here is [a summary of how renv works](https://rstudio.github.io/renv/articles/renv.html). 
* Most of these analyses were run on a personal computer using R 4.2.1, and should be easy to reproduce if you have data access from VRG.
